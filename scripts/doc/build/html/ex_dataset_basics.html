

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Dataset basics &mdash; Cosmo 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Cosmo 0.1 documentation" href="index.html" />
    <link rel="up" title="Exercises" href="ex_toc.html" />
    <link rel="next" title="4. Classification with Naive Bayes classifier" href="ex_classify_naive_bayes.html" />
    <link rel="prev" title="1. Nifti basics" href="ex_nifti_basics.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ex_classify_naive_bayes.html" title="4. Classification with Naive Bayes classifier"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ex_nifti_basics.html" title="1. Nifti basics"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Cosmo 0.1 documentation</a> &raquo;</li>
          <li><a href="ex_toc.html" accesskey="U">Exercises</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Dataset basics</a><ul>
<li><a class="reference internal" href="#nifti-basics">2.1. Nifti basics</a><ul>
<li><a class="reference internal" href="#load-and-view-anatomical-dataset">2.1.1. Load and view anatomical dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loading-datasets-with-different-masks">2.2. Loading datasets with different masks</a></li>
<li><a class="reference internal" href="#setting-sample-attributes-targets-and-chunks">2.3. Setting sample attributes: targets and chunks</a></li>
<li><a class="reference internal" href="#slice-by-samples">2.4. Slice by samples</a><ul>
<li><a class="reference internal" href="#cosmo-dataset-slice-sa-hdr">2.4.1. cosmo dataset slice sa hdr</a></li>
</ul>
</li>
<li><a class="reference internal" href="#slice-by-features">2.5. Slice by features</a></li>
<li><a class="reference internal" href="#operations-on-datasets">2.6. Operations on datasets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">3. Nifti basics</a><ul>
<li><a class="reference internal" href="#id2">3.1. Load and view anatomical dataset</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ex_nifti_basics.html"
                        title="previous chapter">1. Nifti basics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ex_classify_naive_bayes.html"
                        title="next chapter">4. Classification with Naive Bayes classifier</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/ex_dataset_basics.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dataset-basics">
<h1>2. Dataset basics<a class="headerlink" href="#dataset-basics" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nifti-basics">
<h2>2.1. Nifti basics<a class="headerlink" href="#nifti-basics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-and-view-anatomical-dataset">
<h3>2.1.1. Load and view anatomical dataset<a class="headerlink" href="#load-and-view-anatomical-dataset" title="Permalink to this headline">¶</a></h3>
<p>Using the function load_nii load the nifti file of the brainof subject s01 (brain.nii) and assign the result to a struct &#8216;ni&#8217;. What is contained in this struct?</p>
<p>Make a histogram of the non-zero voxels of the brain. There are two &#8216;bumps&#8217; - what do they represent?</p>
<p>Display a saggital, axial and coronal slice.</p>
<p>Hint: <a class="reference external" href="run_nifti_basics_skl.html">run_nifti_basics_skl</a></p>
<p>Solution: <a class="reference external" href="run_nifti_basics.html">run_nifti_basics</a> / <a class="reference external" href="publish/run_nifti_basics.html">run_nifti_basics_pb</a></p>
</div>
</div>
<div class="section" id="loading-datasets-with-different-masks">
<h2>2.2. Loading datasets with different masks<a class="headerlink" href="#loading-datasets-with-different-masks" title="Permalink to this headline">¶</a></h2>
<p>Using the function in <a class="reference external" href="cosmo_fmri_dataset.html">cosmo_fmri_dataset</a> load the dataset for subject s01
(<em>glm_T_stats_allruns.nii.gz</em>) and applying whole brain mask (<em>brain_mask.nii.gz</em>). How
many voxels are included in the whole brain mask?  Now load the same data
with the early visual mask (<em>ev_mask.nii.gz</em>) and then with the ventral temporal mask
(<em>vt_mask.nii.gz</em>).  How many voxels are included in those masks?</p>
<p>Hint: <a class="reference external" href="run_load_datasets_skl.html">run_load_datasets_skl</a></p>
<p>Solution: <a class="reference external" href="run_load_datasets.html">run_load_datasets</a> / <a class="reference external" href="publish/run_load_datasets.html">run_load_datasets_pb</a></p>
</div>
<div class="section" id="setting-sample-attributes-targets-and-chunks">
<h2>2.3. Setting sample attributes: targets and chunks<a class="headerlink" href="#setting-sample-attributes-targets-and-chunks" title="Permalink to this headline">¶</a></h2>
<p>Now load the dataset that has data for each run (<em>glm_T_stats_perrun.nii.gz</em>)
using any mask you like. The stimulus labels for each run of the fMRI study were
monkey, lemur, mallard, warbler, ladybug, and lunamoth &#8211; in that order. This
dataset contains summary statistics (T statistics from the general linear model
analysis, GLM) for each stimulus for each of ten runs. The runs are vertically
stacked by run. For example, the first row contains the summary voxel-wise
responses for monkey in run 1, the second row contains that for lemur in run 1,
and the seventh row contains monkey from run 2, etc.</p>
<p>Add samples atributes (dataset.sa) that contain numeric labels for the targets,
aka stimulus labels, in the samples attribute field dataset.sa.targets, and add
another samples attribute for the chunks, aka run labels, in the field
dataset.sa.chunks.</p>
<p>Hint: <a class="reference external" href="run_setting_sample_attr_skl.html">run_setting_sample_attr_skl</a></p>
<p>Solution: <a class="reference external" href="run_setting_sample_attr.html">run_setting_sample_attr</a> / <a class="reference external" href="publish/run_setting_sample_attr.html">run_setting_sample_attr_pb</a></p>
</div>
<div class="section" id="slice-by-samples">
<h2>2.4. Slice by samples<a class="headerlink" href="#slice-by-samples" title="Permalink to this headline">¶</a></h2>
<p>Write a function with the following signature.</p>
<div class="section" id="cosmo-dataset-slice-sa-hdr">
<h3>2.4.1. cosmo dataset slice sa hdr<a class="headerlink" href="#cosmo-dataset-slice-sa-hdr" title="Permalink to this headline">¶</a></h3>
<div class="highlight-matlab"><div class="highlight"><pre><span class="k">function</span><span class="w"> </span>dataset<span class="p">=</span><span class="nf">cosmo_dataset_slice_sa</span><span class="p">(</span>dataset, samples_to_select<span class="p">)</span><span class="w"></span>
<span class="c">% Slice a dataset by samples, aka rows</span>
<span class="c">%</span>
<span class="c">%   dataset = cosmo_dataset_slice_sa(dataset, samples_to_select)</span>
<span class="c">%</span>
<span class="c">%   Input</span>
<span class="c">%       dataset: an instance of cosmo_fmri_dataset</span>
<span class="c">%       samples_to_select:  An N x 1 array of ones and zeros, where N is the</span>
<span class="c">%                           number of samples in the dataset, ones correspond to</span>
<span class="c">%                           samples indices to keep</span>
<span class="c">%   Returns</span>
<span class="c">%       dataset:    an instance of an fmri_dataset that is a copy of the input dataset</span>
<span class="c">%                   but contains just the rows indictated in sample_indices, and the</span>
<span class="c">%                   corresponding values in sample attributes.</span>
</pre></div>
</div>
<p>Hint: <a class="reference external" href="cosmo_dataset_slice_sa_skl.html">cosmo_dataset_slice_sa_skl</a></p>
<p>Solution: <a class="reference external" href="cosmo_dataset_slice_sa.html">cosmo_dataset_slice_sa</a></p>
<p>For a more <em>robust</em> solution that can handle samples attributes that use string
labels instead of numbers see Solution 2: <a class="reference external" href="cosmo_dataset_slice_samples.html">cosmo_dataset_slice_samples</a></p>
</div>
</div>
<div class="section" id="slice-by-features">
<h2>2.5. Slice by features<a class="headerlink" href="#slice-by-features" title="Permalink to this headline">¶</a></h2>
<p>Write another function with the signature.</p>
<p>Hint: <a class="reference external" href="cosmo_dataset_slice_fa_skl.html">cosmo_dataset_slice_fa_skl</a></p>
<p>Solution: <a class="reference external" href="cosmo_dataset_slice_fa.html">cosmo_dataset_slice_fa</a></p>
<p><em>Robust</em> Solution 2: <a class="reference external" href="cosmo_dataset_slice_features.html">cosmo_dataset_slice_features</a></p>
</div>
<div class="section" id="operations-on-datasets">
<h2>2.6. Operations on datasets<a class="headerlink" href="#operations-on-datasets" title="Permalink to this headline">¶</a></h2>
<p>Now that you are familiar with the dataset, let&#8217;s play around a little. Load the
&#8220;perrun&#8221; data with the VT mask for any subject. Now slice the dataset into
datasets: one that has all the primates restuls (monkey and lemur) and on that
has only the bugs data (ladybug and lunamoth). Calculate the average pattern for
primates and the average pattern for bugs. Now subtract bugs from primates. Save
the result as a dataset. Now convert the dataset into a nifti format using the
function <a class="reference external" href="cosmo_map2nifti_hdr.html">cosmo_map2nifti</a>. Visualize the results using imagesc, or save the
nifti as a file and use some other software like AFNI, or FSL&#8217;s viewer.</p>
<p>Hint: <a class="reference external" href="run_operations_on_datasets_skl.html">run_operations_on_datasets_skl</a></p>
<p>Solution: <a class="reference external" href="run_operations_on_datasets.html">run_operations_on_datasets</a> / <a class="reference external" href="publish/run_operations_on_datasets.html">run_operations_on_datasets_pb</a></p>
</div>
</div>
<div class="section" id="id1">
<h1>3. Nifti basics<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>3.1. Load and view anatomical dataset<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Using the function load_nii load the nifti file of the brainof subject s01 (brain.nii) and assign the result to a struct &#8216;ni&#8217;. What is contained in this struct?</p>
<p>Make a histogram of the non-zero voxels of the brain. There are two &#8216;bumps&#8217; - what do they represent?</p>
<p>Display a saggital, axial and coronal slice.</p>
<p>Hint: <a class="reference external" href="run_nifti_basics_skl.html">run_nifti_basics_skl</a></p>
<p>Solution: <a class="reference external" href="run_nifti_basics.html">run_nifti_basics</a> / <a class="reference external" href="publish/run_nifti_basics.html">run_nifti_basics_pb</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ex_classify_naive_bayes.html" title="4. Classification with Naive Bayes classifier"
             >next</a> |</li>
        <li class="right" >
          <a href="ex_nifti_basics.html" title="1. Nifti basics"
             >previous</a> |</li>
        <li><a href="index.html">Cosmo 0.1 documentation</a> &raquo;</li>
          <li><a href="ex_toc.html" >Exercises</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Andy Connolly, Nick Oosterhof.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>